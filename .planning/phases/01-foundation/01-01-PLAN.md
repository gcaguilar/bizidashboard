# Phase 1, Plan 01 — Project Foundation & Prisma Setup

**Objective:** Initialize Next.js project with TypeScript, configure Prisma ORM with SQLite database, and establish development environment.

**Purpose:** Create the technical foundation for all subsequent database work. Without a working Prisma setup, no schema changes or migrations can be applied.

**Output:** Running Next.js app with Prisma configured, SQLite database initialized, and development environment ready for schema iterations.

**Type:** execute
**Wave:** 1
**Dependencies:** None
**Autonomous:** true

## Must-Haves

**Observable Truths:**
1. `npm run dev` starts Next.js development server successfully
2. `npx prisma migrate dev` executes without errors
3. SQLite database file exists at configured path
4. Prisma Client is importable and can query database

**Required Artifacts:**
- `package.json` — dependencies include next, prisma, @prisma/client
- `prisma/schema.prisma` — minimal schema with datasource configured
- `.env` — DATABASE_URL pointing to SQLite file
- `src/lib/db.ts` — Prisma client singleton export

**Key Links:**
- Prisma Client → SQLite file via DATABASE_URL
- Next.js → Prisma via src/lib/db.ts import

## Tasks

### Task 1: Initialize Next.js Project
**Type:** auto
**Priority:** MUST

**Action:**
Run `npx create-next-app@latest` with TypeScript, Tailwind CSS, ESLint enabled. Configure project name as "bizidashboard", use App Router, and skip git init (already in git repo).

**Commands:**
```bash
npx create-next-app@latest bizidashboard --typescript --tailwind --eslint --app --src-dir --import-alias "@/*" --use-npm --no-git
```

**Verification:**
- `ls package.json` exists
- `npm run dev` starts without errors (verify by checking process starts, then Ctrl+C)
- `src/app/page.tsx` exists

**Done When:**
- Project structure created with src/ directory
- Next.js dependencies installed
- Development server can start

---

### Task 2: Configure Prisma with SQLite
**Type:** auto
**Priority:** MUST

**Action:**
Install Prisma CLI and client, initialize Prisma with SQLite provider, configure database URL in .env, and set up basic schema file. Use Prisma 7.x with the new prisma.config.ts format.

**Commands:**
```bash
npm install prisma @prisma/client
npm install -D prisma
npx prisma init --datasource-provider sqlite
```

**Files to Create/Modify:**
- `.env` — add DATABASE_URL="file:./dev.db"
- `prisma/schema.prisma` — ensure datasource db { provider = "sqlite" url = env("DATABASE_URL") }

**Verification:**
- `cat prisma/schema.prisma` contains sqlite provider
- `cat .env` contains DATABASE_URL
- `npx prisma --version` returns 7.x

**Done When:**
- Prisma initialized with SQLite
- Environment variables configured
- Can run `npx prisma validate` without errors

---

### Task 3: Create Prisma Client Singleton
**Type:** auto
**Priority:** MUST

**Action:**
Create src/lib/db.ts following Prisma best practices for Next.js hot reloading. Export a single PrismaClient instance that handles development hot reload gracefully.

**Code Pattern:**
```typescript
import { PrismaClient } from '@prisma/client'

const globalForPrisma = global as unknown as { prisma: PrismaClient }

export const prisma = globalForPrisma.prisma || new PrismaClient()

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma
```

**Verification:**
- `cat src/lib/db.ts` contains the singleton pattern
- TypeScript compiles: `npx tsc --noEmit` passes
- Can import: `node -e "require('./src/lib/db.ts')"` (or use ts-node equivalent)

**Done When:**
- Prisma client singleton exists
- No TypeScript errors
- Client is ready for schema additions in Plan 02

## Verification

**Overall Phase 01 Verification:**
1. `npm run dev` starts Next.js (localhost:3000 responds)
2. `npx prisma validate` passes
3. `npx prisma migrate dev --name init` creates migration (can be empty)
4. `src/lib/db.ts` exports working prisma client
5. SQLite file created after first migration

## Success Criteria

- [ ] Next.js 16+ installed with TypeScript and App Router
- [ ] Prisma 7+ configured with SQLite provider
- [ ] Prisma client singleton handles Next.js hot reload
- [ ] Environment variables properly configured
- [ ] Can run migrations locally

## Output

After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md` documenting:
- Exact package versions installed
- Prisma configuration details
- Any deviations from standard setup
- Notes for Plan 02 schema development

---

**Estimated Context Usage:** ~35%
**Estimated Execution Time:** 30-45 minutes
